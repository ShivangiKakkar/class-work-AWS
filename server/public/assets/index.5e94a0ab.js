import{o as d,c as u,a as s,d as m,t as f,r as b,w as B,b as S,v as C,e as R,f as T,g as O,h as E,u as r,i as l,j as _,p as I,k as N,l as p,m as V,F as U,n as j,q as $,R as v,s as H,x as M}from"./vendor.e7a03027.js";const q=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?i.credentials="include":t.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(t){if(t.ep)return;t.ep=!0;const i=n(t);fetch(t.href,i)}};q();const W="modulepreload",P={},F="/",D=function(e,n){return!n||n.length===0?e():Promise.all(n.map(o=>{if(o=`${F}${o}`,o in P)return;P[o]=!0;const t=o.endsWith(".css"),i=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${i}`))return;const c=document.createElement("link");if(c.rel=t?"stylesheet":W,t||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),t)return new Promise((h,A)=>{c.addEventListener("load",h),c.addEventListener("error",A)})})).then(()=>e())};var k=(a,e)=>{const n=a.__vccOpts||a;for(const[o,t]of e)n[o]=t;return n};const J={},z={class:"section"},K=s("h1",null,"Home Page",-1),G=[K];function Q(a,e){return d(),u("div",z,G)}var X=k(J,[["render",Q]]);const Y={class:"section"},Z={class:"title"},g=m({props:{title:{type:String,default:"Hello World"}},setup(a){const e=a;return(n,o)=>(d(),u("div",Y,[s("h1",Z,f(e.title),1)]))}}),ss={class:"section"},ts={class:"columns"},es={class:"column is-half is-offset-one-quater"},os={class:"card"},ns=["onSubmit"],as=s("h1",{class:"title"},"Login Page",-1),is={class:"field"},cs={class:"control has-icons-left has-icons-right"},rs=s("span",{class:"icon is-small is-left"},[s("i",{class:"fas fa-envelope"})],-1),ls=s("span",{class:"icon is-small is-right"},[s("i",{class:"fas fa-check"})],-1),ds={class:"field"},us={class:"control has-icons-left"},_s=s("span",{class:"icon is-small is-left"},[s("i",{class:"fas fa-lock"})],-1),ps=s("div",{class:"field"},[s("p",{class:"control"},[s("button",{class:"button is-success"}," Login ")])],-1),hs=m({setup(a){const e=L(),n=b(""),o=b("");function t(){e.Login(n.value,o.value)}return(i,c)=>(d(),u("div",ss,[s("div",ts,[s("div",es,[s("div",os,[s("form",{class:"card-content",onSubmit:B(t,["prevent"])},[as,s("div",is,[s("p",cs,[S(s("input",{class:"input",type:"email",placeholder:"Email","onUpdate:modelValue":c[0]||(c[0]=h=>n.value=h)},null,512),[[C,n.value]]),rs,ls])]),s("div",ds,[s("p",us,[S(s("input",{class:"input",type:"password",placeholder:"Password","onUpdate:modelValue":c[1]||(c[1]=h=>o.value=h)},null,512),[[C,o.value]]),_s])]),ps],40,ns)])])])]))}}),fs=[{path:"/",component:X},{path:"/about",component:g,props:{title:"About Page!"}},{path:"/contact",component:g,props:{title:"Contact Page"}},{path:"/login",component:hs},{path:"/signup",component:g,props:{title:"Signup Page"}},{path:"/wall",component:()=>D(()=>import("./Wall.03293e49.js"),["assets/Wall.03293e49.js","assets/Wall.a0b51b7e.css","assets/vendor.e7a03027.js"])},{path:"/hidden",component:g,props:{title:"Hidden Page"}}],y=R({history:T(),routes:fs,linkActiveClass:"is-active"});y.beforeEach((a,e)=>{const n=L();n.destinationUrl==null&&n.destinationUrl==a.path,console.log({to:a});const o=["/messages","/feed","/wall","/hidden"];if(console.log({protectedUrls:o}),o.includes(a.path)&&(console.log("requires login"),!n.user))return"/login"});const w=O("messages",{state:()=>({notifications:[]}),actions:{close(a){this.notifications.splice(a,1)}}}),ms="http://localhost:3001/api/";function vs(a,e,n,o){let t={};return e&&(t={method:n!=null?n:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),fetch(ms+a,t).then(i=>i.json())}const L=O("session",{state:()=>({user:null,destinationUrl:null}),actions:{async Login(a,e){var o;const n=w();try{const t=await this.api("users/login",{email:a,password:e});t&&n.notifications.push({type:"success",message:`Welcome back ${t.firstname}`}),this.user=t,y.push((o=this.destinationUrl)!=null?o:"/wall")}catch(t){n.notifications.push({type:"danger",message:t.message}),console.table(n.notifications)}},Logout(){this.user=null,y.push("/login")},async api(a,e,n,o){var i;const t=w();try{const c=await vs(a,e,n,o);if((i=c.errors)==null?void 0:i.length)throw{message:c.errors.join(", ")};return await c.data}catch(c){t.notifications.push({type:"danger",message:c.message})}}}});const x=a=>(I("data-v-1b7f2a15"),a=a(),N(),a),gs={key:0,class:"buttons"},bs=x(()=>s("strong",null,"Sign up",-1)),$s=p(" Log in "),ys={key:1,class:"buttons"},ws={class:"avatar"},ks=["src"],Ls=x(()=>s("br",null,null,-1)),xs=x(()=>s("strong",null,"Log Out",-1)),Ss=[xs],Cs=m({setup(a){const e=L();return(n,o)=>{const t=E("router-link");return r(e).user?(d(),u("div",ys,[s("div",ws,[s("img",{src:r(e).user.pic},null,8,ks),s("div",null,[s("strong",null,f(r(e).user.firstname)+" "+f(r(e).user.lastname),1),Ls,s("i",null,f(r(e).user.email),1)])]),s("a",{class:"button is-primary",onClick:o[0]||(o[0]=i=>r(e).Logout())},Ss)])):(d(),u("div",gs,[l(t,{class:"button is-primary",to:"/signup"},{default:_(()=>[bs]),_:1}),l(t,{class:"button is-light",to:"/login"},{default:_(()=>[$s]),_:1})]))}}});var Ps=k(Cs,[["__scopeId","data-v-1b7f2a15"]]);const Os=a=>(I("data-v-2b2dc523"),a=a(),N(),a),Es=Os(()=>s("span",{class:"icon"},[s("i",{class:"fas fa-bell"})],-1)),Is={key:0,class:"tag is-danger"},Ns={class:"navbar-dropdown"},Us=["onClick"],As=m({setup(a){const e=w(),n=b(!1);return(o,t)=>(d(),u("div",{class:$(["navbar-item has-dropdown",{"is-active":n.value}])},[s("a",{class:"navbar-link",onClick:t[0]||(t[0]=i=>n.value=!n.value)},[Es,r(e).notifications.length?(d(),u("span",Is,f(r(e).notifications.length),1)):V("",!0)]),s("div",Ns,[(d(!0),u(U,null,j(r(e).notifications,(i,c)=>(d(),u("div",{class:$(`notification is-light is-${i.type}`)},[s("button",{class:"delete",onClick:h=>r(e).close(c)},null,8,Us),p(" "+f(i.message),1)],2))),256))])],2))}});var Bs=k(As,[["__scopeId","data-v-2b2dc523"]]);const Rs={class:"navbar is-info",role:"navigation","aria-label":"main navigation"},Ts={class:"container"},Vs={class:"navbar-brand"},js=s("a",{class:"navbar-item",href:"https://bulma.io"},[s("img",{src:"https://bulma.io/images/bulma-logo.png",width:"112",height:"28"})],-1),Hs=s("span",{"aria-hidden":"true"},null,-1),Ms=s("span",{"aria-hidden":"true"},null,-1),qs=s("span",{"aria-hidden":"true"},null,-1),Ws=[Hs,Ms,qs],Fs={class:"navbar-start"},Ds=p(" Home "),Js=p(" Wall "),zs={class:"navbar-item has-dropdown is-hoverable"},Ks=s("a",{class:"navbar-link"}," More ",-1),Gs={class:"navbar-dropdown"},Qs=p(" About "),Xs=p(" Jobs "),Ys=p(" Contact "),Zs=s("hr",{class:"navbar-divider"},null,-1),st=s("a",{class:"navbar-item"}," Report an issue ",-1),tt={class:"navbar-end"},et={class:"navbar-item"},ot=s("div",{class:"navbar-item"},[s("a",{class:"bd-tw-button button","data-social-network":"Twitter","data-social-action":"tweet","data-social-target":"https://bulma.io",target:"_blank",href:"https://twitter.com/intent/tweet?text=Bulma: a modern CSS framework based on Flexbox&hashtags=bulmaio&url=https://bulma.io&via=jgthms"},[s("span",{class:"icon"},[s("i",{class:"fab fa-twitter"})]),s("span",null," Tweet ")])],-1),nt=m({setup(a){const e=b(!1);return(n,o)=>(d(),u("nav",Rs,[s("div",Ts,[s("div",Vs,[js,s("a",{role:"button",class:$(["navbar-burger",{"is-active":e.value}]),"aria-label":"menu","aria-expanded":"false",onClick:o[0]||(o[0]=t=>e.value=!e.value)},Ws,2)]),s("div",{id:"navbarBasicExample",class:$(["navbar-menu",{"is-active":e.value}])},[s("div",Fs,[l(r(v),{class:"navbar-item",to:"/"},{default:_(()=>[Ds]),_:1}),l(r(v),{class:"navbar-item",to:"/wall"},{default:_(()=>[Js]),_:1}),s("div",zs,[Ks,s("div",Gs,[l(r(v),{class:"navbar-item",to:"/about"},{default:_(()=>[Qs]),_:1}),l(r(v),{class:"navbar-item",to:"/jobs"},{default:_(()=>[Xs]),_:1}),l(r(v),{class:"navbar-item",to:"/contact"},{default:_(()=>[Ys]),_:1}),Zs,st])])]),s("div",tt,[s("div",et,[l(Ps)]),l(Bs),ot])],2)])]))}}),at={class:"container"},it=m({setup(a){return(e,n)=>{const o=E("router-view");return d(),u(U,null,[l(nt),s("div",at,[l(o)])],64)}}});H(it).use(y).use(M()).mount("#app");export{vs as a};
